# 排列组合

---

## 排列组合

### 基本概念

**排列组合**是**组合数学**中最基本的概念。

**排列**：从给定个数的元素中取出指定个数元素进行排序。

**排列数**：从$m$个不同的元素中不重复地取出$n$个元素做排列的方法数，记作$A_{m}^{n}$或$A(m,n)$。

**组合**：从给定个数的元素中取出指定个数元素，不考虑排序。

**组合数**：从$m$个不同的元素中不重复地取出$n$个元素做组合的方法数，记作$C_{m}^{n}$或$C(m,n)$。

### 公式

* $A_{m}^{n} = m(m-1) \cdots (m-n+1) = \cfrac{m!}{(m-n)!}$

* $C_{m}^{n} = \cfrac{A_{m}^{n}}{n!} = \cfrac{m!}{(m-n)! \cdot n!}$

* $C_{m}^{n} = C_{m}^{m-n}$

* $C_{m}^{n} = C_{m-1}^{n} + C_{m-1}^{n-1}$

    注：该公式可用于递推求组合数表

* $C_{m+n+1}^{n} = C_{m+n}^{n} + C_{m+n-1}^{n-1} + C_{m+n-2}^{n-2} + \cdots + C_{m+1}^{1} + C_{m}^{0}$

* $C_{m}^{k} \cdot C_{k}^{n} = C_{m}^{n} \cdot C_{m-n}^{k-n}$

### 代码实现

* **直接计算排列数单值**，时间复杂度为$O(n)$

    ```cpp
    int Perm(int m, int n)  // Perm(m, n) 表示 A(m, n)
    {
        int res = 1;
        for (int i=0; i<n; ++i)
        {
            res *= m - i;
        }
        return res;
    }
    ```

* **直接计算组合数单值**，时间复杂度为$O(n)$

    ```cpp
    int Comb(int m, int n)  // Comb(m, n) 表示 C(m, n)
    {
        int res = 1;
        for (int i=1; i<=n; ++i)
        {
            res = res * (m - i + 1) / i;
        }
        return res;
    }
    ```

* **递推预处理求组合数**，时间复杂度为$O(n^2)$

    ```cpp
    int comb[N][N];

    void GetComb()          // 调用该函数后，comb[m][n] 表示 C(m,n)
    {
        memset(comb, 0, sizeof(comb));
        for (int i=1; i<N; ++i)
        {
            comb[i][0] = 1;
            comb[i][1] = i;
            comb[i][i] = 1;
        }
        for (int i=2; i<N; ++i) 
        {
            for (int j=2; j<i; ++j) 
            {
                comb[i][j] = comb[i-1][j-1] + comb[i-1][j];
            }
        }
        return;
    }
    ```

---

## 基本计数原理

### 加法原理

假设做一件事有$n$种办法，第$i$个办法有$P_i$种方案，那么做这一件事一共有$P_1 + P_2 + P_3 + \cdots + P_n$种方案。

### 乘法原理

假设做一件事有$n$个步骤，第$i$个步骤有$P_i$种方案，那么做这件事一共有$P_1 \cdot P_2 \cdot P_3 \cdots P_n$种方案。

---

## 隔板原理

**隔板原理**又称为**隔板法**和**插空法**，是**排列组合**的一种推广方法。
主要是用于解决**不相邻组合**与**追加排列**的问题，可推广到**整数分拆**与**不定方程**的**可行解数**问题。

例题：把$n$个**相同**的小球放入$m$个**不同**的盒子里$(n \geq m \geq 1)$，要求每个盒子非空，请问有多少种不同的放法？

这是种常见的排列组合问题，解题方法是：
把这$n$个小球排成一列，然后在小球与小球之间的$n-1$个空挡里放入$m-1$块隔板，这样就相当于把$n$个小球放进了$m$个盒子里，有$C^{m-1}_{n-1}$种不同的放置方法。

这种解题方法就称之为**隔板法**。
